<!DOCTYPE html>

<html>

	<head>
	    <meta charset="UTF-8" />
	    <title>Pong 3!</title>
	    <style type="text/css">
	    	canvas {
			  border:1px dashed #000;

	    	}
	    </style>
	</head>
    
	<body onload="init()">
	    <canvas id="canvas" width="600" height="480">
			Navegador não compatível com HTML5 Canvas
	    </canvas>
	
	</body>
	
	<script>
	

var canvas, context, 
 	barraWidth, barraHeight,
	barraPosX, barraPosY;
	
var velocidadeBarra;

var teclaBaixoPressionada;
var teclaCimaPressionada;
var teclaEsqPressionada;
var teclaDirPressionada;

var canvas = document.getElementById("canvas"); 
var context = canvas.getContext("2d"); 

function init() {

	barraWidth = 50;
	barraHeight = 50;

    barraPosX = (canvas.width - barraWidth) / 2;
    barraPosY = (canvas.height - barraHeight) / 2;;
    
    velocidadeBarra = 10;

	document.addEventListener('keyup', keyUp, false);     // Adiciona evento para o teclado
	document.addEventListener('keydown', keyDown, false); // Adiciona evento para o teclado
	
	setInterval(gameLoop, 30);                            // Executa gameLoop a cada 30 frames
	
}


function keyUp(e){
	if (e.keyCode == 38){
		teclaCimaPressionada = false; // Soltou tecla CIMA
	} 
	else if (e.keyCode == 40){
		teclaBaixoPressionada = false; // Soltou a tecla BAIXO
	}
	else if (e.keyCode == 37){   
		teclaEsqPressionada = false; // Soltou a tecla ESQUERDA
	}
	else if (e.keyCode == 39){
		teclaDirPressionada = false; // Soltou a tecla DIRETIA
	}
	
}

function keyDown(e){
	if (e.keyCode == 38){
		teclaCimaPressionada = true; // Acertou a tecla CIMA
	} 
	else if (e.keyCode == 40){
		teclaBaixoPressionada = true; // Acertou a tecla BAIXO
	}
	else if (e.keyCode == 37){
		teclaEsqPressionada = true; // Acertou a tecla ESQUERDA
	}

	else if (e.keyCode == 39){
		teclaDirPressionada = true; // Acertou a tecla DIREITA
	}
}

function gameLoop(){

	
	if (teclaCimaPressionada != teclaBaixoPressionada) {
		if (teclaCimaPressionada) { // se for para cima
			if (barraPosY > 0) { // se nao sair da tela
				barraPosY -= velocidadeBarra; // muda a posição
			}
		}
		if (teclaBaixoPressionada) { // se for para cima
			if (barraPosY < canvas.height-barraHeight) { // se nao sair da tela
				barraPosY += velocidadeBarra; // muda a posição
			}
		}
	}

	if (teclaDirPressionada != teclaEsqPressionada) {
		if (teclaEsqPressionada) { // se for para cima
			if (barraPosX > 0) { // se nao sair da tela
				barraPosX -= velocidadeBarra; // muda a posição
			}
		}
		if (teclaDirPressionada) { // se for para cima
			if (barraPosX < canvas.width-barraWidth) { // se nao sair da tela
				barraPosX += velocidadeBarra; // muda a posicção
			}
		}
	}
	

	context.clearRect(0,0,canvas.width,canvas.height); // Limpar Tela
	
	// Barra
	context.fillRect(barraPosX, barraPosY, barraWidth, barraHeight);   // desenho do jogador
		
	
		
}

	</script>
	
</html>