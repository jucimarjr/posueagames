<!-- Baseado em: Jogo Pong (http://gamedeveloper.com.br/blog/2013/08/21/pong-html5-javascript/) -->
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
        <title>PONG em HTML5</title>
        <style type="text/css">
        	canvas {
            	border:1px dashed #000000;
            }
        </style>
    </head>   
    <body onload="init()" >
	    <canvas id="canvas" width="600" height="480">
	            Navegador não compatível com HTML5 Canvas
	    </canvas>
	    <script>
	    var canvas, context, 
	    barraWidth, barraHeight, 
	    jogadorPosX, jogadorPosY, 
	    oponentePosX, oponentePosY,
	    bolaRaio, bolaPosX, bolaPosY,
	    pontosJogador, pontosOponente,
	    teclaCimaPressionada, teclaBaixoPressionada,
	    teclaEsquerdaPressionada, teclaDireitaPressionada,
	    currentDirection,
	    velocidadeJogador;
	    
	    function init() {
        	canvas = document.getElementById("canvas");// procura o canvas
			context = canvas.getContext("2d");// recupera o contexto 2d
			
			barraWidth = 30;
            barraHeight = 30;
            
            jogadorPosX = (canvas.width - barraWidth) /2;
            jogadorPosY = (canvas.height - barraHeight) / 2;
            velocidadeJogador = 15;
            teclaCimaPressionada = false;
            teclaBaixoPressionada = true;
            teclaEsquerdaPressionada = false;
            teclaDireitaPressionada = false;
            
            currentDirection = 'down';
            
            document.addEventListener('keyup', keyUp, false);// adiciona evento para keyup
            document.addEventListener('keydown', keyDown, false);// adiciona evento para keydown
            setInterval(gameLoop, 30);// chama a function gameLoop a cada 30 frames
	    }
	    
	    function getRandomArbitary (min, max) {
	        return Math.random() * (max - min) + min;
	    }
	    
	    function keyDown(e) {
	    	
	    	switch(e.keyCode) {
	    	
	    	case 37: //left
	    		teclaEsquerdaPressionada = true;
	    		break;
	    	case 38: //up
	    		teclaCimaPressionada = true;
	    		break;
	    	case 39: //up
	    		teclaDireitaPressionada = true;
	    		break;
	    	case 40: //down
	    		teclaBaixoPressionada = true;
	    		break;
	    	
	    	}
            
    	}
    
    	function keyUp(e) {
    		switch(e.keyCode) {
	    	
	    	case 37: //left
	    		teclaEsquerdaPressionada = false;
	    		break;
	    	case 38: //up
	    		teclaCimaPressionada = false;
	    		break;
	    	case 39: //up
	    		teclaDireitaPressionada = false;
	    		break;
	    	case 40: //down
	    		teclaBaixoPressionada = false;
	    		break;
	    	
	    	}
    	}
    	
    	function collide() {
    		
    		var direction = getRandomArbitary(1, 4);    		
    	}
    	
    	function gameLoop() {
    		
	    	if (teclaCimaPressionada) { // se for para cima...
	                if (jogadorPosY > 0) { // se não sair da tela...
	                	alert("cima");
	                	jogadorPosY -= velocidadeJogador;// muda a posição
	                }
	        }
	        else if (teclaBaixoPressionada) { // se for para baixo...
	                if (jogadorPosY < (canvas.height - barraHeight)) {// se não sair da tela...
	                	jogadorPosY += velocidadeJogador;// muda a posição
	                }
	        } else if (teclaDireitaPressionada) {
	        	
	        	if (jogadorPosX < (canvas.width - barraWidth))
	        		jogadorPosX += velocidadeJogador;
	        	
	        	
	        } else if (teclaEsquerdaPressionada) {
	        	
	        	if (jogadorPosX > 0)
	        		jogadorPosX -= velocidadeJogador;
	        	
	        	
	        }
	    		
    		  // Desenha tudo na tela
            context.clearRect(0, 0, canvas.width, canvas.height);// limpa a tela antes de desenhar
            
                
         // Jogador e Oponente
            context.fillRect(jogadorPosX, jogadorPosY, barraWidth, barraHeight);//desenha jogador
                        
	    }
	    	    
	    </script>
    </body>
</html>